# 计算机网络
## 1.计算机网络概述
### 计算机网络的作用
- 计算机网络是信息服务基础设施
- 生活中不可或缺（数据参考CNNIC《中国互联网发展研究报告》）
### 因特网
- **☆网络、互联网、因特网的基本概念**
  - 网络（Network）由若干节点（Node）和连接这些结点的链路（Link）组成
  - 多个网络还可以通过路由器互连起来，这样就构成了一个覆盖范围更大的网络，即互联网，因此互联网称网络的网络（Netwrok of Networks）
  - 因特网（Internet）是世界上最大的互连网络
- 因特网的发展
  - 1969年，单个分组交换网ARPANET
  - 1985年，NSFNET（主干网、地区网、校园网）
  - 1993年，多层次ISP结构的因特网
- 因特网标准化工作
  - 因特网协会ISOC
    - 因特网体系结构委员会IAB（因特网工程部ETF、因特网研究部RTF）
  - 制定因特网标准的四个阶段  
    1.因特网草案（不是RFC）  
    2.建议标准（开始或为RFC）  
    3.草案标准  
    4.因特网标准  
### 交换方式
- 电路交换
  - 电路交换的三个步骤：1.建立连接；2.数据传输；3.释放连接
  - 对于计算机突发数据的传输，线路利用率不高
- **★分组交换**
  - 将报文划分成若干个等长数据段，然后给各组数据添加首部（包括重要的控制信息）构成分组
  - 结点交换机（路由器）对分组进行存储转发
  - 分组从源主机到目的主机可走不同的路径
- 报文交换
  - 与分组交换类似
  - 不限制报文长度
  - 对结点交换机的存储空间要求高
### 计算机网络定义和分类
- 定义
  - 计算机网络的简单定义：互联、自治、计算机集合
  - 没有精确统一的定义；不同阶段定义不同，反映当时网络技术发展水平
- **☆分类**
  - 按交换技术分类：电路交换网、分组交换网、报文交换网
  - 按使用者分类：公用网、专用网
  - 按传输介质分类：有线网、无线网
  - 按覆盖范围分类：广域网WAN、城域网MAN、局域网LAN、个域网PAN
  - 按拓扑结构分类：总线型网络、星型网络、环形网络、网状型网络等
### 性能指标
- 速率
 - 比特：计算机中数据量的单位，也是信息论中信息量的单位；一比特就是二进制数字中的一个1或0
   - 常用单位：
     - 8 bit = 1 Byte
     - KB = 2^10 B
     - MB = K*KB = 2^10 * 2^10 B = 2^20 B
     - GB = K*MB = 2^10 * 2^20 B = 2^30 B
     - TB = K*GB = 2^10 * 2^30 B = 2^40 B
 - 链接在计算机网络上的主机在数字信道上传送比特的速率，也称比特率或数据率
   - 基本单位：bit(b/s，bps)
   - 常用单位：
     - kb/s = 10^3 b/s
     - Mb/s = K*kb/s = 10^6 b/s
     - Gb/s = K*Mb/s = 10^9 b/s
     - Tb/s = K*Gb/s = 10^12 b/s
- **☆带宽**
  - 模拟信号系统带宽：信号包含的各种不同频率成分所占据的频率范围
    - 单位：Hz（kHZ, MHz, GHz）
  - 计算机网络带宽：用来表示网络的通信线路所能传送数据的能力，因此网络带宽表示在单位时间从网络中的某一点到另一点所能通过的“最高数据率”
    - 单位：b/s(kb/s, Mb/s, Gb/s, Tb/s)
- 吞吐量
  - 表示在单位时间内通过某个网络（或信道、接口）的数据量
  - 吞吐量经常用于对现实世界中的网络的一种测量，以便知道实际上到底由多少数据量能够通过网络
  - 吞吐量受网络的带宽或额定速率的限制
- **★时延**
  - 发送时延：分组长度(b)/发送速率(b/s)；发送速率=min[网卡发送速率，信道带宽，交换机或路由器的接口速率]
  - 传播时延：信道长度(m)/电磁波传输速率(m/s)；电磁波传播速率：
    - 自由空间：3 * 10^8 m/s
    - 铜线电缆：2.3 * 10^8 m/s
    - 光纤电缆：2 * 10^8 m/s
  - 处理时延：路由器性能及繁忙程度动态变化，而不方便计算，一般忽略
- 时延宽带积
  - 传播时延和带宽的乘积
  - 若发送端连续发送数据，则在所发送的第一个比特即将到达终点时，发送端就已经发送了时延带宽积个比特
  - 链路的时延带宽积又称为比特为单位的链路长度
- 往返时间RTT
  - 通信双方交互一次所耗费的时间
- **☆利用率**
  - 信道利用率：表示某信道有百分之几的时间是被利用的（有数据通过）
  - 网络利用率：全网络的信道利用率的加权平均
  - 根据排队论，当某信道的利用率增大时，该信道引起的时延也会迅速增大，因此信道利用率并非越高越好，也不能太低，这会浪费通信资源
- 丢包率
  - 在一定时间范围内，传输过程中丢失的分组数量与总分组的数量比较
  - 丢包率具体可分为接口丢包率、结点丢包率、链路丢包率、路径丢包率、网络丢包率等
  - 分组丢失的主要情况：1.分组在传输过程中出现误码被结点丢弃；2.分钟到达一台队列已满的分组交换机时被丢弃，在通信量较大时就可能造成网络拥塞
### **★体系结构**
- 常见计算机体系结构
  - OSI（法律上的国际标准）：物理层、数据链路层、网络层、运输层、会话层、表示层、应用层
  - TCP/IP（商用最多）：网络接口层、网际层、运输层、应用层
  - 原理体系结构（抽象理解）：物理层、数据链路层、网络层、运输层、应用层
- 分层的必要性
  - 分层将复杂的系统转化为若干个较小的局部问题
  - 分层的功能
    - 物理层：解决何种信号来传输比特的问题
    - 数据链路层：解决分组在一个网络（或一段链路）上传输的问题
    - 网络层：解决分组在多个网络上传输（路由）的问题
    - 运输层：解决进程之间基于网络的通信问题
    - 应用层：解决通过应用进程的交互来实现特定网络应用的问题
- 分层思想：浏览器进程与Web服务器进程交互，会分组逐层封装和解封
- 专用术语
  - 实体：任何可发送或接收信息的硬件或软件进程；对等实体指通信双方相同层次中的实体
  - 协议：控制两个对等实体进行逻辑通信规则的集合（语法、语义、同步）
  - 服务：在协议的控制下，两个对等实体间的逻辑通信使得本层能够向上一层提供服务
## 2.物理层
### 物理层基本概念
- **★物理层所要解决的问题**：
  - 连接各种计算机的传输媒体上传输数据比特流
  - 为数据链路层屏蔽各种传输媒体的差异，使数据链路层只需要考虑如何完成本层协议和服务，而不必考虑网络具体的传输媒体类型
- **★物理层协议主要任务**：
  - 机械特性：指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置
  - 电气特性：指明在接口电缆的各条线上出现的范围
  - 功能特性：指明某条线上出现的某一电平的电压表示何种意义
  - 过程特性：指明对于不同功能的各种可能事件的出现顺序
### 物理层下面的传输媒体
- 导引型
  - 同轴电缆：价格贵且布线不灵活和方便，随着集线器出现，在局域网领域基本上都是采用双绞线作为传输媒体
  - *☆双绞线：抵御部分外界电磁干扰；减少相邻导线电磁干扰（家用以太网最低选择超5类），屏蔽双绞线比非屏蔽双绞线具有更好的抗干扰性能（价格更贵）*
  - *☆光纤（多模/单模）：通信容量大，传输损耗小，远距离传输时更加经济，抗雷点和电磁干扰性能好，无串音干扰，保密性好不宜被窃听，体积小重量轻；切割光纤需要专业设备，价格贵*
  - 电力线
- 非导引型
  - 无线电波
  - *☆微波：直线传播，可以穿透电离层；地面100米发生塔，最大视距LOS传输；距离为100公里；地球同步卫星；低轨道卫星*
  - 红外线
  - 可见光
### 传输方式
- **★串行传输和并行传输**
  - 串行传输：比特依次进行传输，适合远距离传输，计算机网络采用此传输
  - 并行传输：多个比特同时在多根传输线上传输，不适合远距离传输，成本高，计算机内部采用此传输
- **★同步传输和异步传输**
  - 同步传输：比特依次传输没有间隔，各比特持续时长相等，需要收发双方时间同步
    - 外同步：收发双发之间添加一条单独的时钟信号线
    - 内同步：发送端将时钟同步信号编码发送数据中一起传输（例如曼彻斯特编码）
  - 异步传输：以字节位单位进行传输，字节之间间隔不固定，但每个字节的比特持续时长相等（字节间异步，比特间同步），需要每个字节添加起始位和结束位
- 单向通信、双向交替通信、双向同时通信
  - 单向通信（单工）：比如广播
  - 双向交替通信（双半工）：双向交替通信（不能同时），如对讲机
  - 双向同时通信（双工）：双向同时通信，如电话
### 编码与调制
- 常用术语
  - 消息：需要计算机处理的文字、图片、音频以及视频等统称为消息
  - 数据：运送消息的实体，计算机智能处理二进制数据
  - 信号：数据的电磁表现；来自信源的原始电信号称为基带信号
    - 数字基带信号：如计算机内部，CPU与内存之间所传输的信号
    - 模拟基带信号：如麦克风采集到声音后所产生的音频信号
- **★编码**
  - 数字信号转换为另一种数字信号，在数字信道中传输（如以太网使用曼彻斯特编码4B/5B\8B/10B等编码）
  - 模拟信号转换为数字信号，在数字信道中传输（如音频信号进行编码的脉码调制PCM）
  - 常用编码
    - 不归零编码：在整个码元时间内不会出现零电平；存在同步问题，需要额外一根传输线来传输时钟信号，使发送方和接收方同步；对于计算机网络，宁愿利用这根传输线传输数据信号，而不是传输时钟信号
    - 归零编码：在每个码元传输结束后信号都要“归零”，所以接收方只要在信号归零后进行采样即可，不需要单独的时钟信号；实际上，归零编码相当于把时钟信号用“归零”方式编码在了数据之内，这种称为“自同步”信号；但归零编码中大部分数据带宽都用来传输“归零”而浪费
    - 曼彻斯特编码：在码元中间时刻发生电平跳变，即表示时钟，也表示数据；正跳变表示1或0，负跳变表示0或1可自行定义；传统以太网（10Mb/s）使用该编码
    - 差分曼彻斯特编码：在码元中间时刻发生跳变，跳变仅表示时钟；码元开始处电平是否发生变化表示数据；比曼彻斯特编码变化少，更适合较高传输速率
- **★调制**
  - 数字型号转换为模拟信号，在模拟信道中传输（如WIFI采用补码键控CCK/直接序列扩频OSSS/正交频分复用OFDM等调制方式）
  - 模拟信号转换为另一种模拟信号，在模拟信道中传输（如语音数据加载到模拟的载波信号中传输；频分复用FDM技术，充分利用带宽资源）
  - 基本调制（二元制）
    - 调幅AM：由两种不同振幅的基本波形构成；每个基本波形只能表示1比特的信息量
    - 调频FM：由两种不同频率的基本波形构成；每个基本波形只能表示1比特的信息量
    - 调相PM：由两种不同频率的基本初相位构成；每个基本波形只能表示1比特的信息量
  - 混合调制（多元制）
    - 如将相位与振幅进行混合调制的正交振幅调制QAM
    - QAM16可以调制出12种相位，每种相位有1或2中振幅可选
    - 可以调制出16种基本波形，每种波形可以表示4个比特
- **★码元**
  - 在使用时间域的波形表示数字信号时，代表不同离散数值的基本波形
  - 码元是一段调制好的基本波形，可以表示比特信息
### 信道的极限容量**
- 信号失真的因素
  - 码元传输速率
  - 信号传输距离
  - 噪声干扰
  - 传输媒体质量
- **★奈式准则**：在假定的理想条件下，为了避免码间串扰，码元传输速率是有上限的
  - 理想低通信道的最高码元传输速率= 2W Baud = 2W 码元/秒，W指信道带宽（单位为Hz）
  - 理想带通信道的最高码元传输速率= W Baud = W 码元/秒，W指信道带宽（单位为Hz）
  - 波特率和比特率的关系：
    - 码元传输速率又称波特率、调制速率、波形速率或符号速率，与波特率有一定关系；
    - 当1个码元只携带1比特的信息量时，波特率（码元/秒）与比特率（比特/秒）在数值上是相等的；
    - 当1个码元携带n比特的信息量时，则波特率转换成比特率时，数值要乘以n
  - 注意事项
    - 实际的信道所能传输的最高码元速率，要明显低于奈式准则给出的上限值，实际信道还会受到其它很多因素干扰（如噪声干扰、信号衰减、传输媒体质量等）
    - 要提高信息传输速率（比特率），就必须设法使每一个码元能携带更多个比特的信息量，这需要采用多元制
    - 并不是无限制提高每个码元所携带的比特数量，就可以无限制地提高信息传输速率，因为信道的极限信息传输速率还要受限于实际的信号在信道中传输时的信噪比
- **★香农公式**：带宽受限且高斯白噪声干扰的信道的极限信息传输速率
  - 信道的极限信息传输速率
    - $C = W * \log_2(1 + S/N)$
    - C：信道的极限信息传输速率（单位为b/s）
    - W：信道贷款（单位为Hz）
    - S：信道内所传输信号的平均功率
    - N：信道内的高斯噪声功率
    - S/N：信噪比，使用分贝(dB)作为度量单位
  - 注意事项
    - 在实际信道上能够达到的信号传输速率要比该公式的极限传输速率低不少，这是因为在实际信道中，信号还要接收到其它一些损伤，如各种脉冲干扰，信号在传输中的衰减和失真等，这些因素在香农公式中并未考虑
    - 信道带宽或者信道中信噪比越大，信息的极限速率传输越高
- **★奈式准则和香农公式的意义**
  - 在信道带宽一定的情况下，根据奈式准则和香农公式，要想提高信息的传输速率就必须采用多元制（更好的调制方法）和努力提高信道中的信噪比
  - 自从香农公式发表后，各种新的信号处理和调制方法就不断出现，其目的都是为了尽可能地接近香农公式给出的传输速率极限
## 3.数据链路层
## 4.网络层
## 5.运输层
## 6.应用层
